<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script>

    // Market Checkout html
    // 1. membuat data yang tersedia dan simpan pada variable
    // 2. buat itterasi agar data muncul pada prompt/ muculkan alert apabila tidak ada produk yang tersedia
    // 3. variable "Berapa quantity yang diperlukan" dan di masukkan kedalam promt selanjutnya/ apabila input sesuai dengan stock yang ada maka akan ditambahkan, apabila berlebih buatkan alert stock tidak mencukupi
    // 4. setelah menambahkan quantitiy, maka munculkan alert yang berisi quantity yang diinginkan oleh client
    // 5. kemudian dilanjutkan dengan prompt yang berisi, checkout atau lanjut berbelanja didalam prompt, maka buat dahulu variablenya kemudian masukkan kedalam prompt.
    // 6. apabila memilih checkout maka akan menunjukkan receipt total belanjaan, apabila melanjutkan memilih belanja maka akan kembali padaprompt pertama untuk memilih buaah.

    function CheckInput(user) {
      if (user < 1 || user > produk.length) {
        return false;
      } else {
        return true;
      }
    }

    let word = ``
    let receipt = ``
    let addToCart = []
    let jumlah = ``
    let word2 = ``
    
    let produk = [
      { id: 1, name: "Apel", price: 10000, stock: 10 },
      { id: 2, name: "Jeruk", price: 15000, stock: 15 },
      { id: 3, name: "Mangga", price: 20000, stock: 20 },
    ];

   
    for (let i = 0; i < produk.length; i++) {
      word += `${produk[i].id}. ${produk[i].name} = Rp.${produk[i].price.toLocaleString()}(${produk[i].stock})\n`;
    }

    //step 3. Munculkkan Promptnya Masukkan angka produk
    do {
      do{
      var inputUser = parseInt(prompt(`${word} \n Silahkan Masukan Nomor Product`)) // 1

      if (CheckInput(inputUser) === false) {
        // 1 ---> return true
        alert("Product Tidak Ditemukan");
      } else if (isNaN(inputUser)){
        alert("Invalid input")
      }
      addToCart.push(inputUser)
      jumlah = inputUser;
      word2 += `${addToCart.length}. ${produk[jumlah-1].name} - RP.${produk[jumlah-1].price}` //kenapa kurang 1? karena index dimulai dari 0 dan pilihan user tidak ada 0
    } while (isNaN(inputUser) || CheckInput(inputUser) === false );
    
    do{
      var inputUser2 = parseInt(prompt(`Silahkan Masukan quantity produk: `))
      if(isNaN(inputUser2)){
        alert("Input invalid")
        continue
      }else if(inputUser2 > produk[jumlah-1].stock){
        alert("Stock tidak cukup")
        continue
      }else{
        alert("Product berhasil ditambahkan ke keranjang")
        totalPrice = inputUser2 * produk[jumlah-1].price
        alert(word2 += `x ${inputUser2} = Rp. ${totalPrice.toLocaleString()} \n`)
        word2 += receipt
    }
    }while(isNaN(inputUser2) || inputUser2 > produk[jumlah-1].stock);

    do{
      var inputUser3 = parseInt(prompt("Pilih menu dibawah ini: \n 1. Checkout \n2. Lanjutkan Belanja"))
      if(isNaN(inputUser3)){
        alert("Input invalid")
        continue
      }else if (inputUser3 < 1){
        alert("Pilih angka 1 / 2")
      }else if(inputUser3 > 3){
        alert("Pilih angka 1 / 2")
      }

      
      if(inputUser3==1){
        totalPrice = inputUser2 * produk[jumlah-1].price
        receipt = totalPrice 
        alert(`totalnya \n Rp${receipt.toLocaleString()}`)
      }else if(inputUser3 ==2 ){
        inputUser = 0
        inputUser2 = 0
        // inputUser++
      }
    }while((CheckInput(inputUser3) === 2))
  }while((CheckInput(inputUser2) === false))
    </script>
</html>
